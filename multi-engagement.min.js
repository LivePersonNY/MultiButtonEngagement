var lpMultiChannelEngagement={elementId:"lp-multi-channel-engagement",defaults:{imagemain:"https://d1hryyr5hiabsc.cloudfront.net/web2020/img/chat-engagements/LP_Sun_2020_Engagement_Icon.svg",imagefacebook:"https://d1hryyr5hiabsc.cloudfront.net/web2020/img/chat-engagements/Facebook_Messenger2.svg",imagewhatsapp:"https://d1hryyr5hiabsc.cloudfront.net/web2020/img/chat-engagements/WhatsApp2.svg",imageapple:"https://d1hryyr5hiabsc.cloudfront.net/web2020/img/chat-engagements/Apple_Business_Chat2.svg",imagesms:"https://d1hryyr5hiabsc.cloudfront.net/web2020/img/chat-engagements/SMS2.svg",channels:"facebook,whatsapp,apple,sms",containerclass:"lp-multi-channel-engagement",zindex:1e4,css:"https://d1hryyr5hiabsc.cloudfront.net/web2020/js/engagement.min.css",debug:!1,smsmessage:"I would like to connect with SMS!"},log:function(e,n){this.debug&&console.log(e,n)},config:function(e){this.defaults=$.extend(this.defaults,e)},startWebWithMessage:function(e,n){var t=this;document.getElementById(n||this.elementId)&&document.getElementById(n||this.elementId).click(),$('#lpChat div[data-lp-point="lines_area"]').length<1?setTimeout(function(){t.startWebWithMessage(e,n)},500):t.webDirectMessage(e)},webDirectMessage:function(e){$(".lpview_form_textarea").val(e),$(".lp_paper_plane_button").prop("disabled",!1).trigger("click"),$(".conversation-starter").hide()},channels:{main:function(){var e=$("<img>");e.attr("src",this.owner.defaults.imagemain),e.addClass("lp-multi-channel-main lp-multi-channel-image"),this.owner.container.prepend(e)},facebook:function(){var e=$("<img>");e.attr("src",this.owner.defaults.imagefacebook),e.addClass("lp-multi-channel-facebook lp-multi-channel-image");var n=this;e.click(function(e){n.owner.defaults.onClickFacebook?n.owner.defaults.onClickFacebook():n.owner.callbacks.facebook()}),this.owner.container.prepend(e)},whatsapp:function(){var e=$("<img>");e.attr("src",this.owner.defaults.imagewhatsapp),e.addClass("lp-multi-channel-whatsapp lp-multi-channel-image");var n=this;e.click(function(e){n.owner.defaults.onClickWhatsapp?n.owner.defaults.onClickWhatsapp():n.owner.callbacks.whatsapp()}),this.owner.container.prepend(e)},apple:function(){var e=$("<img>");e.attr("src",this.owner.defaults.imageapple),e.addClass("lp-multi-channel-apple lp-multi-channel-image");var n=this;e.click(function(e){n.owner.defaults.onClickApple?n.owner.defaults.onClickApple():n.owner.callbacks.apple()}),this.owner.container.prepend(e)},sms:function(){var e=$("<img>");e.attr("src",this.owner.defaults.imagesms),e.addClass("lp-multi-channel-sms lp-multi-channel-image");var n=this;e.click(function(e){n.owner.defaults.onClickSms?n.owner.defaults.onClickSms():n.owner.callbacks.sms()}),this.owner.container.prepend(e)}},callbacks:{sms:function(){lpMultiChannelEngagement.startWebWithMessage("SMS")},apple:function(){lpMultiChannelEngagement.startWebWithMessage("Apple Business Chat")},facebook:function(){lpMultiChannelEngagement.startWebWithMessage("Facebook Messenger")},whatsapp:function(){lpMultiChannelEngagement.startWebWithMessage("WhatsApp")}},openContext:function(e){this.context=e},createElement:function(){var e=this,n=$("#"+this.elementId);n.addClass(this.defaults.containerclass),n.css({"z-index":e.defaults.zindex,display:"none"});var t=$("<div>");t.addClass("lp-multi-channel-buttons"),n.wrap(t),this.container=n.parent();var a=n.data();this.config(a),this.channels.owner=this,this.channels.main(),this.defaults.channels.split(",").forEach(function(n){e.channels[n]?e.channels[n]():console.error(n+" is not a supported channel.")}),setTimeout(function(){$("body").addClass("engagement-ready")},100)},init:function(){$("link#lp-multichannel-css").length||$("head").append("<link id='lp-multichannel-css' href='"+this.defaults.css+"' type='text/css' rel='stylesheet' onload=\"lpMultiChannelEngagement.createElement();\" />")}},intervals={},removeListener=function(e){intervals[e]&&(window.clearInterval(intervals[e]),intervals[e]=null)},found="waitUntilExists.found";function lp_wait_for_jquery(){$&&$("#"+lpMultiChannelEngagement.elementId).length>0?($.fn.waitUntilExists=function(e,n,t){var a=this.selector,s=$(a),i=s.not(function(){return $(this).data(found)});return"remove"===e?removeListener(a):(i.each(e).data(found,!0),n&&s.length?removeListener(a):t||(intervals[a]=window.setInterval(function(){s.waitUntilExists(e,n,!0)},50))),s},lpMultiChannelEngagement.init()):setTimeout(lp_wait_for_jquery,50)}function lp_wait_for_tag(){window.lpTag?lpTag.events.bind("lpUnifiedWindow","windowClosed",function(e){lp_wait_for_jquery()}):setTimeout(lp_wait_for_tag,50)}lp_wait_for_jquery(),lp_wait_for_tag();
